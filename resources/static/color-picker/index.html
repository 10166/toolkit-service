<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>颜色选择器 - 炫酷工具箱</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: #0a0a0a;
            color: var(--text-primary);
            overflow-x: hidden;
            
            /* CSS Variables for theming */
            --bg-primary: #0a0a0a;
            --bg-secondary: rgba(99, 102, 241, 0.08);
            --bg-card: rgba(255, 255, 255, 0.05);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --border-color: rgba(255, 255, 255, 0.1);
            --accent-color: #6366f1;
        }
        
        /* Light theme */
        [data-theme="light"] {
            --bg-primary: #f8fafc;
            --bg-secondary: rgba(99, 102, 241, 0.08);
            --bg-card: rgba(255, 255, 255, 0.8);
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: rgba(99, 102, 241, 0.15);
            --accent-color: #6366f1;
        }
        
        /* 背景动画 */
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* 霓虹光效 */
        .neon-glow {
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.5),
                        0 0 40px rgba(102, 126, 234, 0.3),
                        0 0 60px rgba(102, 126, 234, 0.1);
        }
        
        /* 光束效果 */
        .beam {
            position: absolute;
            width: 2px;
            height: 100px;
            background: linear-gradient(to bottom, transparent, #667eea, transparent);
            animation: beam 3s ease-in-out infinite;
        }
        
        @keyframes beam {
            0%, 100% { opacity: 0; transform: translateY(-100px); }
            50% { opacity: 1; transform: translateY(100vh); }
        }
        
        /* 粒子效果 */
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #667eea;
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 1; }
            50% { transform: translateY(-20px) rotate(180deg); opacity: 0.5; }
        }
        
        /* 工具卡片 */
        .tool-card {
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 2rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .tool-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s ease;
        }
        
        .tool-card:hover::before {
            left: 100%;
        }
        
        /* 文字发光效果 */
        .glow-text {
            text-shadow: 0 0 5px rgba(99, 102, 241, 0.8),
                         0 0 10px rgba(99, 102, 241, 0.6),
                         0 0 15px rgba(99, 102, 241, 0.4);
        }
        
        /* 按钮动画 */
        .btn-glow {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .btn-glow::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }
        
        .btn-glow:hover::before {
            left: 100%;
        }
        
        /* 输入框样式 */
        .fancy-input {
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 15px;
            padding: 1rem;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }
        
        .fancy-input:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
            outline: none;
        }
        
        /* 滚动条样式 */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--accent-color);
            border-radius: 4px;
            opacity: 0.5;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            opacity: 0.7;
        }
        
        /* 颜色显示区域 */
        .color-display {
            height: 200px;
            border-radius: 20px;
            margin-bottom: 2rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .color-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }
        
        .color-display:hover::before {
            transform: translateX(100%);
        }
        
        /* 滑块样式 */
        .slider-container {
            margin-bottom: 1.5rem;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .color-slider {
            width: 100%;
            height: 8px;
            border-radius: 10px;
            outline: none;
            cursor: pointer;
            -webkit-appearance: none;
            background: transparent;
        }
        
        .color-slider::-webkit-slider-track {
            height: 8px;
            border-radius: 10px;
            background: var(--bg-secondary);
        }
        
        .color-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .color-slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        /* 标签页样式 */
        .format-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .format-tab {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 0.75rem 1.5rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .format-tab:hover {
            background: var(--bg-secondary);
            border-color: var(--accent-color);
            color: var(--text-primary);
        }
        
        .format-tab.active {
            background: var(--bg-secondary);
            border-color: var(--accent-color);
            color: var(--text-primary);
        }
        
        /* 颜色选择器样式 */
        .color-picker-wrapper {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .color-picker {
            width: 80px;
            height: 50px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            background: transparent;
        }
        
        .color-picker::-webkit-color-swatch-wrapper {
            padding: 0;
        }
        
        .color-picker::-webkit-color-swatch {
            border: 2px solid var(--border-color);
            border-radius: 15px;
        }
        
        /* 预设颜色样式 */
        .color-palette {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
            gap: 0.75rem;
            margin-top: 1.5rem;
        }
        
        .color-palette-item {
            height: 40px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .color-palette-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.3) 50%, transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }
        
        .color-palette-item:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
        }
        
        .color-palette-item:hover::before {
            transform: translateX(100%);
        }
        
        /* 颜色历史样式 */
        .color-history {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1.5rem;
        }
        
        .color-history-item {
            width: 35px;
            height: 35px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            position: relative;
        }
        
        .color-history-item:hover {
            transform: scale(1.15);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
        }
        
        .color-history-item::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 20px;
            height: 20px;
            background: var(--bg-secondary);
            border-radius: 50%;
            transition: transform 0.3s ease;
        }
        
        .color-history-item:hover::after {
            transform: translate(-50%, -50%) scale(1);
        }
        
        /* 通知样式 */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 15px;
            color: var(--text-primary);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            border-left: 4px solid #4caf50;
        }
        
        /* 输入组样式 */
        .input-group {
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }
        
        .input-group .fancy-input {
            flex: 1;
            margin: 0;
        }
        
        .copy-btn {
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 15px;
            padding: 1rem 1.5rem;
            color: var(--text-primary);
            transition: all 0.3s ease;
            cursor: pointer;
            white-space: nowrap;
        }
        
        .copy-btn:hover {
            background: rgba(102, 126, 234, 0.3);
            border-color: var(--accent-color);
            transform: translateY(-2px);
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .tool-card {
                padding: 1.5rem;
            }
            
            .color-picker-wrapper {
                flex-direction: column;
                align-items: stretch;
            }
            
            .color-picker {
                width: 100%;
                height: 60px;
            }
            
            .format-tabs {
                justify-content: center;
            }
            
            .color-palette {
                grid-template-columns: repeat(auto-fill, minmax(35px, 1fr));
                gap: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- 背景动画效果 -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="beam" style="left: 10%; animation-delay: 0s;"></div>
        <div class="beam" style="left: 30%; animation-delay: 1s;"></div>
        <div class="beam" style="left: 50%; animation-delay: 2s;"></div>
        <div class="beam" style="left: 70%; animation-delay: 0.5s;"></div>
        <div class="beam" style="left: 90%; animation-delay: 1.5s;"></div>
        
        <div class="particle" style="left: 20%; top: 20%; animation-delay: 0s;"></div>
        <div class="particle" style="left: 80%; top: 30%; animation-delay: 1s;"></div>
        <div class="particle" style="left: 50%; top: 60%; animation-delay: 2s;"></div>
        <div class="particle" style="left: 10%; top: 80%; animation-delay: 3s;"></div>
        <div class="particle" style="left: 90%; top: 70%; animation-delay: 4s;"></div>
    </div>

    <!-- 导航栏 -->
    <nav class="fixed top-0 left-0 right-0 z-50 bg-black bg-opacity-20 backdrop-blur-lg border-b border-white border-opacity-10">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center">
                        <i class="fas fa-tools text-white text-sm"></i>
                    </div>
                    <span class="text-xl font-bold glow-text">工具箱</span>
                </div>
                
                <div class="flex items-center space-x-4">
                    <button id="theme-toggle" class="text-white hover:text-purple-400 transition-colors duration-300">
                        <i class="fas fa-moon"></i>
                    </button>
                    <a href="/" class="text-white hover:text-purple-400 transition-colors duration-300">
                        <i class="fas fa-arrow-left mr-2"></i>返回主页
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主要内容 -->
    <main class="min-h-screen pt-20">
        <div class="container mx-auto px-6 py-12">
            <!-- 头部 -->
            <div class="text-center mb-12">
                <div class="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl mb-6 neon-glow">
                    <i class="fas fa-palette text-white text-3xl"></i>
                </div>
                <h1 class="text-4xl md:text-5xl font-bold mb-4 glow-text">
                    <span class="bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 bg-clip-text text-transparent">
                        颜色选择器
                    </span>
                </h1>
                <p class="text-xl text-gray-300 max-w-2xl mx-auto">
                    专业的颜色选择工具，支持多种颜色格式和实时预览
                </p>
            </div>

            <!-- 工具主体 -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- 左侧：颜色选择和控制 -->
                <div class="space-y-6">
                    <!-- 颜色显示和选择 -->
                    <div class="tool-card">
                        <h3 class="text-xl font-semibold text-white mb-4 flex items-center">
                            <i class="fas fa-eye text-purple-400 mr-3"></i>
                            颜色预览
                        </h3>
                        
                        <div class="color-display" id="colorDisplay"></div>
                        
                        <div class="color-picker-wrapper">
                            <input type="color" class="color-picker" id="colorPicker" value="#3366ff" title="选择颜色">
                            <button id="randomColor" class="flex-1 bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-600 hover:to-teal-600 text-white py-3 px-6 rounded-lg font-semibold transition-all duration-300 btn-glow">
                                <i class="fas fa-dice mr-2"></i>随机颜色
                            </button>
                        </div>
                    </div>
                    
                    <!-- RGB 调节 -->
                    <div class="tool-card">
                        <h3 class="text-xl font-semibold text-white mb-4 flex items-center">
                            <i class="fas fa-sliders-h text-blue-400 mr-3"></i>
                            RGB 调节
                        </h3>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>红色 (R)</span>
                                <span id="redValue">51</span>
                            </div>
                            <input type="range" class="color-slider" id="redSlider" min="0" max="255" value="51" style="background: linear-gradient(to right, #000, #ff0000);">
                        </div>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>绿色 (G)</span>
                                <span id="greenValue">102</span>
                            </div>
                            <input type="range" class="color-slider" id="greenSlider" min="0" max="255" value="102" style="background: linear-gradient(to right, #000, #00ff00);">
                        </div>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>蓝色 (B)</span>
                                <span id="blueValue">255</span>
                            </div>
                            <input type="range" class="color-slider" id="blueSlider" min="0" max="255" value="255" style="background: linear-gradient(to right, #000, #0000ff);">
                        </div>
                    </div>
                    
                    <!-- HSL 调节 -->
                    <div class="tool-card">
                        <h3 class="text-xl font-semibold text-white mb-4 flex items-center">
                            <i class="fas fa-adjust text-green-400 mr-3"></i>
                            HSL 调节
                        </h3>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>色相 (H)</span>
                                <span id="hueValue">220°</span>
                            </div>
                            <input type="range" class="color-slider" id="hueSlider" min="0" max="360" value="220" style="background: linear-gradient(to right, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000);">
                        </div>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>饱和度 (S)</span>
                                <span id="saturationValue">100%</span>
                            </div>
                            <input type="range" class="color-slider" id="saturationSlider" min="0" max="100" value="100" style="background: linear-gradient(to right, #808080, #3366ff);">
                        </div>
                        
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>亮度 (L)</span>
                                <span id="lightnessValue">60%</span>
                            </div>
                            <input type="range" class="color-slider" id="lightnessSlider" min="0" max="100" value="60" style="background: linear-gradient(to right, #000, #3366ff, #fff);">
                        </div>
                    </div>
                </div>

                <!-- 右侧：格式输出和预设 -->
                <div class="space-y-6">
                    <!-- 颜色格式 -->
                    <div class="tool-card">
                        <h3 class="text-xl font-semibold text-white mb-4 flex items-center">
                            <i class="fas fa-code text-yellow-400 mr-3"></i>
                            颜色格式
                        </h3>
                        
                        <div class="format-tabs">
                            <div class="format-tab active" data-format="hex">HEX</div>
                            <div class="format-tab" data-format="rgb">RGB</div>
                            <div class="format-tab" data-format="hsl">HSL</div>
                            <div class="format-tab" data-format="cmyk">CMYK</div>
                        </div>
                        
                        <div class="format-content">
                            <div class="input-group" id="hexContent">
                                <input type="text" class="fancy-input" id="hexValue" value="#3366ff" placeholder="#RRGGBB">
                                <button class="copy-btn" id="copyHex">
                                    <i class="fas fa-clipboard mr-2"></i>复制
                                </button>
                            </div>
                            
                            <div class="input-group hidden" id="rgbContent">
                                <input type="text" class="fancy-input" id="rgbValue" value="rgb(51, 102, 255)" placeholder="rgb(R, G, B)">
                                <button class="copy-btn" id="copyRgb">
                                    <i class="fas fa-clipboard mr-2"></i>复制
                                </button>
                            </div>
                            
                            <div class="input-group hidden" id="hslContent">
                                <input type="text" class="fancy-input" id="hslValue" value="hsl(220, 100%, 60%)" placeholder="hsl(H, S%, L%)">
                                <button class="copy-btn" id="copyHsl">
                                    <i class="fas fa-clipboard mr-2"></i>复制
                                </button>
                            </div>
                            
                            <div class="input-group hidden" id="cmykContent">
                                <input type="text" class="fancy-input" id="cmykValue" value="cmyk(80%, 60%, 0%, 0%)" placeholder="cmyk(C%, M%, Y%, K%)">
                                <button class="copy-btn" id="copyCmyk">
                                    <i class="fas fa-clipboard mr-2"></i>复制
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 预设颜色 -->
                    <div class="tool-card">
                        <h3 class="text-xl font-semibold text-white mb-4 flex items-center">
                            <i class="fas fa-swatchbook text-pink-400 mr-3"></i>
                            预设颜色
                        </h3>
                        
                        <div class="color-palette" id="colorPalette">
                            <!-- 预设颜色将通过JavaScript动态生成 -->
                        </div>
                    </div>
                    
                    <!-- 颜色历史 -->
                    <div class="tool-card">
                        <h3 class="text-xl font-semibold text-white mb-4 flex items-center">
                            <i class="fas fa-history text-orange-400 mr-3"></i>
                            颜色历史
                        </h3>
                        
                        <div class="color-history" id="colorHistory">
                            <!-- 颜色历史将通过JavaScript动态生成 -->
                        </div>
                        
                        <div class="mt-4 text-center">
                            <button id="clearHistory" class="copy-btn">
                                <i class="fas fa-trash mr-2"></i>清空历史
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 通知组件 -->
    <div id="notification" class="notification success">
        <i class="fas fa-check-circle mr-2"></i>
        <span id="notificationText">已复制到剪贴板！</span>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化变量
            const colorPicker = document.getElementById('colorPicker');
            const colorDisplay = document.getElementById('colorDisplay');
            const randomColorBtn = document.getElementById('randomColor');
            
            // RGB滑块
            const redSlider = document.getElementById('redSlider');
            const greenSlider = document.getElementById('greenSlider');
            const blueSlider = document.getElementById('blueSlider');
            const redValue = document.getElementById('redValue');
            const greenValue = document.getElementById('greenValue');
            const blueValue = document.getElementById('blueValue');
            
            // HSL滑块
            const hueSlider = document.getElementById('hueSlider');
            const saturationSlider = document.getElementById('saturationSlider');
            const lightnessSlider = document.getElementById('lightnessSlider');
            const hueValue = document.getElementById('hueValue');
            const saturationValue = document.getElementById('saturationValue');
            const lightnessValue = document.getElementById('lightnessValue');
            
            // 颜色格式输入框
            const hexValue = document.getElementById('hexValue');
            const rgbValue = document.getElementById('rgbValue');
            const hslValue = document.getElementById('hslValue');
            const cmykValue = document.getElementById('cmykValue');
            
            // 复制按钮
            const copyHex = document.getElementById('copyHex');
            const copyRgb = document.getElementById('copyRgb');
            const copyHsl = document.getElementById('copyHsl');
            const copyCmyk = document.getElementById('copyCmyk');
            
            // 预设颜色和历史
            const colorPalette = document.getElementById('colorPalette');
            const colorHistory = document.getElementById('colorHistory');
            const clearHistoryBtn = document.getElementById('clearHistory');
            
            // 通知
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            // 格式标签
            const formatTabs = document.querySelectorAll('.format-tab');
            const formatContents = {
                hex: document.getElementById('hexContent'),
                rgb: document.getElementById('rgbContent'),
                hsl: document.getElementById('hslContent'),
                cmyk: document.getElementById('cmykContent')
            };
            
            // 预设颜色数组
            const presetColors = [
                '#FF5733', '#33FF57', '#3357FF', '#F333FF', '#FF33A1', 
                '#33FFF6', '#FF8C33', '#8C33FF', '#33FF8C', '#FF3333',
                '#000000', '#FFFFFF', '#FF0000', '#00FF00', '#0000FF',
                '#FFFF00', '#FF00FF', '#00FFFF', '#FFA500', '#800080',
                '#FFC0CB', '#A52A2A', '#808080', '#008000', '#000080',
                '#4B0082', '#EE82EE', '#98FB98', '#F0E68C', '#DDA0DD'
            ];
            
            // 颜色历史数组
            let colorHistoryArray = JSON.parse(localStorage.getItem('colorHistory')) || [];
            
            // 初始化
            updateColor(colorPicker.value);
            generateColorPalette();
            updateColorHistoryDisplay();
            
            // 格式标签切换
            formatTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const format = this.getAttribute('data-format');
                    
                    // 更新标签状态
                    formatTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // 显示对应内容
                    Object.values(formatContents).forEach(content => content.classList.add('hidden'));
                    formatContents[format].classList.remove('hidden');
                });
            });
            
            // 颜色选择器变化事件
            colorPicker.addEventListener('input', function() {
                updateColor(this.value);
            });
            
            // 随机颜色按钮
            randomColorBtn.addEventListener('click', function() {
                const randomColor = '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0');
                colorPicker.value = randomColor;
                updateColor(randomColor);
            });
            
            // RGB滑块变化事件
            redSlider.addEventListener('input', function() {
                redValue.textContent = this.value;
                updateColorFromRgb();
            });
            
            greenSlider.addEventListener('input', function() {
                greenValue.textContent = this.value;
                updateColorFromRgb();
            });
            
            blueSlider.addEventListener('input', function() {
                blueValue.textContent = this.value;
                updateColorFromRgb();
            });
            
            // HSL滑块变化事件
            hueSlider.addEventListener('input', function() {
                hueValue.textContent = this.value + '°';
                updateColorFromHsl();
            });
            
            saturationSlider.addEventListener('input', function() {
                saturationValue.textContent = this.value + '%';
                updateColorFromHsl();
            });
            
            lightnessSlider.addEventListener('input', function() {
                lightnessValue.textContent = this.value + '%';
                updateColorFromHsl();
            });
            
            // 颜色格式输入框变化事件
            hexValue.addEventListener('input', function() {
                if (/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(this.value)) {
                    colorPicker.value = this.value;
                    updateColor(this.value);
                }
            });
            
            rgbValue.addEventListener('input', function() {
                const match = this.value.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);
                if (match) {
                    const r = parseInt(match[1]);
                    const g = parseInt(match[2]);
                    const b = parseInt(match[3]);
                    if (r >= 0 && r <= 255 && g >= 0 && g <= 255 && b >= 0 && b <= 255) {
                        updateColorFromRgbInput(r, g, b);
                    }
                }
            });
            
            hslValue.addEventListener('input', function() {
                const match = this.value.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);
                if (match) {
                    const h = parseInt(match[1]);
                    const s = parseInt(match[2]);
                    const l = parseInt(match[3]);
                    if (h >= 0 && h <= 360 && s >= 0 && s <= 100 && l >= 0 && l <= 100) {
                        updateColorFromHslInput(h, s, l);
                    }
                }
            });
            
            // 复制按钮事件
            copyHex.addEventListener('click', function() {
                copyToClipboard(hexValue.value);
            });
            
            copyRgb.addEventListener('click', function() {
                copyToClipboard(rgbValue.value);
            });
            
            copyHsl.addEventListener('click', function() {
                copyToClipboard(hslValue.value);
            });
            
            copyCmyk.addEventListener('click', function() {
                copyToClipboard(cmykValue.value);
            });
            
            // 清空历史按钮
            clearHistoryBtn.addEventListener('click', function() {
                if (confirm('确定要清空颜色历史吗？')) {
                    colorHistoryArray = [];
                    localStorage.removeItem('colorHistory');
                    updateColorHistoryDisplay();
                    showNotification('颜色历史已清空');
                }
            });
            
            // 更新颜色函数
            function updateColor(hex) {
                // 更新颜色显示区域
                colorDisplay.style.backgroundColor = hex;
                
                // 更新RGB值
                const rgb = hexToRgb(hex);
                redSlider.value = rgb.r;
                greenSlider.value = rgb.g;
                blueSlider.value = rgb.b;
                redValue.textContent = rgb.r;
                greenValue.textContent = rgb.g;
                blueValue.textContent = rgb.b;
                
                // 更新HSL值
                const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
                hueSlider.value = hsl.h;
                saturationSlider.value = hsl.s;
                lightnessSlider.value = hsl.l;
                hueValue.textContent = hsl.h + '°';
                saturationValue.textContent = hsl.s + '%';
                lightnessValue.textContent = hsl.l + '%';
                
                // 更新颜色格式输入框
                hexValue.value = hex;
                rgbValue.value = `rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`;
                hslValue.value = `hsl(${hsl.h}, ${hsl.s}%, ${hsl.l}%)`;
                
                // 更新CMYK值
                const cmyk = rgbToCmyk(rgb.r, rgb.g, rgb.b);
                cmykValue.value = `cmyk(${cmyk.c}%, ${cmyk.m}%, ${cmyk.y}%, ${cmyk.k}%)`;
                
                // 更新HSL滑块背景
                updateHslSliderBackgrounds(hsl.h, hsl.s, hsl.l);
                
                // 添加到颜色历史
                addToColorHistory(hex);
            }
            
            // 从RGB滑块更新颜色
            function updateColorFromRgb() {
                const r = parseInt(redSlider.value);
                const g = parseInt(greenSlider.value);
                const b = parseInt(blueSlider.value);
                const hex = rgbToHex(r, g, b);
                
                colorPicker.value = hex;
                updateColor(hex);
            }
            
            // 从HSL滑块更新颜色
            function updateColorFromHsl() {
                const h = parseInt(hueSlider.value);
                const s = parseInt(saturationSlider.value);
                const l = parseInt(lightnessSlider.value);
                const rgb = hslToRgb(h, s, l);
                const hex = rgbToHex(rgb.r, rgb.g, rgb.b);
                
                colorPicker.value = hex;
                updateColor(hex);
            }
            
            // 从RGB输入框更新颜色
            function updateColorFromRgbInput(r, g, b) {
                const hex = rgbToHex(r, g, b);
                colorPicker.value = hex;
                updateColor(hex);
            }
            
            // 从HSL输入框更新颜色
            function updateColorFromHslInput(h, s, l) {
                const rgb = hslToRgb(h, s, l);
                const hex = rgbToHex(rgb.r, rgb.g, rgb.b);
                colorPicker.value = hex;
                updateColor(hex);
            }
            
            // 更新HSL滑块背景
            function updateHslSliderBackgrounds(h, s, l) {
                // 更新饱和度滑块背景
                saturationSlider.style.background = `linear-gradient(to right, hsl(${h}, 0%, ${l}%), hsl(${h}, 100%, ${l}%))`;
                
                // 更新亮度滑块背景
                lightnessSlider.style.background = `linear-gradient(to right, hsl(${h}, ${s}%, 0%), hsl(${h}, ${s}%, 50%), hsl(${h}, ${s}%, 100%))`;
            }
            
            // 生成预设颜色
            function generateColorPalette() {
                colorPalette.innerHTML = '';
                presetColors.forEach(color => {
                    const colorItem = document.createElement('div');
                    colorItem.className = 'color-palette-item';
                    colorItem.style.backgroundColor = color;
                    colorItem.title = color;
                    colorItem.addEventListener('click', function() {
                        colorPicker.value = color;
                        updateColor(color);
                    });
                    colorPalette.appendChild(colorItem);
                });
            }
            
            // 添加到颜色历史
            function addToColorHistory(color) {
                // 避免重复添加相同颜色
                if (colorHistoryArray.includes(color)) {
                    return;
                }
                
                // 添加到数组开头
                colorHistoryArray.unshift(color);
                
                // 限制历史记录数量
                if (colorHistoryArray.length > 20) {
                    colorHistoryArray.pop();
                }
                
                // 保存到本地存储
                localStorage.setItem('colorHistory', JSON.stringify(colorHistoryArray));
                
                // 更新显示
                updateColorHistoryDisplay();
            }
            
            // 更新颜色历史显示
            function updateColorHistoryDisplay() {
                colorHistory.innerHTML = '';
                if (colorHistoryArray.length === 0) {
                    colorHistory.innerHTML = '<div class="text-gray-400 text-sm text-center w-full">暂无历史记录</div>';
                    return;
                }
                
                colorHistoryArray.forEach(color => {
                    const historyItem = document.createElement('div');
                    historyItem.className = 'color-history-item';
                    historyItem.style.backgroundColor = color;
                    historyItem.title = color;
                    historyItem.addEventListener('click', function() {
                        colorPicker.value = color;
                        updateColor(color);
                    });
                    colorHistory.appendChild(historyItem);
                });
            }
            
            // 复制到剪贴板
            function copyToClipboard(text) {
                navigator.clipboard.writeText(text).then(function() {
                    showNotification('已复制到剪贴板！');
                }).catch(function(err) {
                    console.error('无法复制文本: ', err);
                    showNotification('复制失败，请手动复制');
                });
            }
            
            // 显示通知
            function showNotification(message) {
                notificationText.textContent = message;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
            
            // 颜色转换函数
            function hexToRgb(hex) {
                const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                return result ? {
                    r: parseInt(result[1], 16),
                    g: parseInt(result[2], 16),
                    b: parseInt(result[3], 16)
                } : null;
            }
            
            function rgbToHex(r, g, b) {
                return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
            }
            
            function rgbToHsl(r, g, b) {
                r /= 255;
                g /= 255;
                b /= 255;
                
                const max = Math.max(r, g, b);
                const min = Math.min(r, g, b);
                let h, s, l = (max + min) / 2;
                
                if (max === min) {
                    h = s = 0; // 灰度
                } else {
                    const d = max - min;
                    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                    
                    switch (max) {
                        case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;
                        case g: h = ((b - r) / d + 2) / 6; break;
                        case b: h = ((r - g) / d + 4) / 6; break;
                    }
                }
                
                return {
                    h: Math.round(h * 360),
                    s: Math.round(s * 100),
                    l: Math.round(l * 100)
                };
            }
            
            function hslToRgb(h, s, l) {
                h /= 360;
                s /= 100;
                l /= 100;
                
                let r, g, b;
                
                if (s === 0) {
                    r = g = b = l; // 灰度
                } else {
                    const hue2rgb = function(p, q, t) {
                        if (t < 0) t += 1;
                        if (t > 1) t -= 1;
                        if (t < 1/6) return p + (q - p) * 6 * t;
                        if (t < 1/2) return q;
                        if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                        return p;
                    };
                    
                    const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                    const p = 2 * l - q;
                    
                    r = hue2rgb(p, q, h + 1/3);
                    g = hue2rgb(p, q, h);
                    b = hue2rgb(p, q, h - 1/3);
                }
                
                return {
                    r: Math.round(r * 255),
                    g: Math.round(g * 255),
                    b: Math.round(b * 255)
                };
            }
            
            function rgbToCmyk(r, g, b) {
                r /= 255;
                g /= 255;
                b /= 255;
                
                const k = 1 - Math.max(r, g, b);
                const c = (1 - r - k) / (1 - k) || 0;
                const m = (1 - g - k) / (1 - k) || 0;
                const y = (1 - b - k) / (1 - k) || 0;
                
                return {
                    c: Math.round(c * 100),
                    m: Math.round(m * 100),
                    y: Math.round(y * 100),
                    k: Math.round(k * 100)
                };
            }
        });
        
        // Theme toggle functionality
        const themeToggle = document.getElementById('theme-toggle');
        const body = document.body;
        const themeIcon = themeToggle.querySelector('i');
        
        // Check for saved theme preference or default to dark mode
        const currentTheme = localStorage.getItem('theme') || 'dark';
        body.setAttribute('data-theme', currentTheme);
        updateThemeIcon(currentTheme);
        
        themeToggle.addEventListener('click', () => {
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        });
        
        function updateThemeIcon(theme) {
            if (theme === 'light') {
                themeIcon.className = 'fas fa-sun';
            } else {
                themeIcon.className = 'fas fa-moon';
            }
        }
    </script>
</body>
</html>